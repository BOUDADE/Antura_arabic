tree("Root")
	fallback 
		tree("Hold")
		tree("AnturaTime")
		tree("Release")
		random(0.4, 0.4, 0.2, 0.1)
			tree("Idle")
			tree("Walk")
			tree("Run")
			tree("Ninja")

// -------------------------
// Behaviours States		
// -------------------------
tree("Idle")
	while
		Sequence
			not IsOut
			not OnDrag
		Sequence
			SetAnimation("Idle")
			SetNavigation("Stop")
			HoldState("Idle")
			Succeed

tree("Walk")
	while
		Sequence
			not IsOut
			not OnDrag
		Sequence
			SetAnimation("Walk")
			SetNavigation("Walk")
			HoldState("Walk")
			Succeed

tree("Run")
	while
		Sequence
			not IsOut
			not OnDrag
		Sequence
			SetAnimation("Run")
			SetNavigation("Run")
			HoldState("Ninja")
			Succeed

tree("Ninja")
	while
		Sequence
			not IsOut
			not OnDrag
		Sequence
			SetAnimation("Ninja")
			SetNavigation("Ninja")
			HoldState("Ninja")
			Succeed



// -------------------------------------------- //	
// Hang State Collision + match control
// -------------------------------------------- //
tree("Hold")
	Sequence
		while 
			Sequence
				not IsOut
				OnDrag
			Parallel
				SetAnimation("Hold")
				SetNavigation("Hold")
				Race
					Sequence
						IsCollidingWithArea	
						IsMatching 
						SetMatchState(true)
					Sequence
						IsCollidingWithArea
						not IsMatching 
						SetMatchState(false)
				Succeed
// -------------------------------------------- //

tree("AnturaTime")
	Sequence
		not IsOut
		not OnDrag
		IsAnturaMoment
		SetAnimation("Terrified")
		SetNavigation("Run")
		while
			Sequence
				not OnDrag
				IsAnturaMoment
			Running


//TurnAllFrontOfTarget()
tree("Release")
	Sequence
		not OnDrag
		ToBeRelease
		fallback
			Sequence
				IsMatching
				tree("GoOut")
			Sequence
				Not IsMatching
				Release

tree("GoOut")
	Sequence
		ToBeRelease
		Sequence
			IsMatching
			Sequence
				Release
		//		SetAnimation("Run")
				SetNavigation("GoOut")
				SetIsOut(true)
		//		HoldState("GoOut")
				Succeed



tree("TurnFrontOfCamera")
	Sequence
		SetAnimation("Walk")
		SetNavigation("Stop")
		TurnAllFrontOfTarget()
		HoldState("TurnFrontOfCamera")

// -------------------------

// tree("LookingToTarget")
//	while IsLookingToTarget 
//		LookAtTarget()

tree("LookingToTarget")
	Race
		while 
			DoLookTarget 
			LookAtTarget()
		while 
			not DoLookTarget 
			LookAtForward()

